# rpgjs-cutscene

## Summary

Timeline of camera moves, dialogue, waits, and triggers (e.g. “start battle”). Uses scene and player hooks. Intended to support storybook-style cutscenes and eventually AI-generated videos or clips for major scenes via a multimodal agent.

## Goals

- Define a cutscene as a timeline: camera movement (pan, zoom, focus on sprite), dialogue lines (using existing showText or custom), waits, and custom triggers (e.g. “start battle”, “spawn event”).
- Play the timeline on demand (e.g. from an event or after a quest step); optionally skip or speed up.
- Use scene and player hooks so camera and dialogue integrate with the current map and sprites.
- **Future:** A multimodal agent could generate storybook-style cutscenes (e.g. illustrated panels or keyframes) and eventually AI-generated video clips for major story moments; this plugin would provide the playback and trigger surface (e.g. “play cutscene id X” where X is agent-generated or predefined).

## RPGJS integration

- **Server:** Orchestrate triggers (dialogue, spawn, battle) and optionally advance timeline state. Player hooks or custom events to start/stop cutscene; emit state to client so it can drive camera and UI. [Plugin.ts](docs/rpgjs-reference/packages/common/src/Plugin.ts) (`HookServer.PlayerJoinMap`, custom), [Module.ts](docs/rpgjs-reference/packages/common/src/Module.ts).
- **Client:** Camera control (RPGJS scene/camera API), dialogue (default-gui or custom), and waits. `SceneDraw`, `BeforeSceneLoading`, `AfterSceneLoading` for camera; `AddGui` for full-screen or overlay panels if needed. [Plugin.ts](docs/rpgjs-reference/packages/common/src/Plugin.ts) (`HookClient.SceneDraw`, `HookClient.AddGui`).
- **Config:** Namespace for default skip key, speed, and whether to allow skip. [create-plugin.md](docs/rpgjs-reference/docs/advanced/create-plugin.md).

## Project relevance

- Supports narrative moments and intros/outros; pairs with quest-log and dialogue for structured story beats.
- **Multimodal agent:** Long-term, cutscenes could be authored or generated by an AI (storybook frames or short video clips). This plugin would handle playback and integration (e.g. “play generated cutscene for quest X”). Fits OpenClaw × RPGJS expansion into richer narrative content. Ownership: Cursor; see [AGENTS.md](AGENTS.md).

## Sources

- [Creating and sharing a plugin](docs/rpgjs-reference/docs/advanced/create-plugin.md)
- [Plugin.ts](docs/rpgjs-reference/packages/common/src/Plugin.ts) — HookServer, HookClient
- [Module.ts](docs/rpgjs-reference/packages/common/src/Module.ts) — RpgModule, loadModules
- [RPGJS plugin analysis](docs/rpgjs-plugin-analysis.md) — default-gui dialogue, showText
- [AGENTS.md](AGENTS.md)
- [01-idea-doc.md](.ai/idea/01-idea-doc.md) — narrative and game world as agent environment

## Implementation notes

- Define timeline format (JSON or code): list of steps with type (camera, dialogue, wait, trigger) and params. Player and client advance through steps; server can own “trigger” steps.
- Camera API: confirm RPGJS scene/camera hooks or methods for pan/zoom/focus; see [docs/rpgjs-reference](docs/rpgjs-reference) for scene docs.
- For AI-generated content later: define an interface (e.g. “cutscene asset = list of image/video URLs + duration”) so the same playback engine can run predefined or generated cutscenes.
